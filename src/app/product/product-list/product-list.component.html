<div class="product-list-container" *ngIf="!(isProductFormVisible$ | async)">
  <div *ngIf="!(areProductLoading$ | async)" class="btn-container">
    <mat-button-toggle-group
      #group="matButtonToggleGroup"
      [value]="showProductCard$ | async"
      (change)="onShowProductCardChange($event)"
    >
      <mat-button-toggle
        [checked]="!(showProductCard$ | async)"
        value="false"
        aria-label="Text align left"
      >
        <mat-icon>list</mat-icon>
      </mat-button-toggle>
      <mat-button-toggle
        value="true"
        aria-label="Text align center"
        [checked]="showProductCard$ | async"
      >
        <mat-icon>grid_on</mat-icon>
      </mat-button-toggle>
    </mat-button-toggle-group>

    <button
      mat-mini-fab
      color="accent"
      aria-label="Example icon button with a plus one icon"
      (click)="onNewProduct()"
    >
      <a mat-menu-item routerLink="/new-product" routerLinkActive="active-link"
        ><mat-icon>add</mat-icon></a
      >
    </button>
  </div>

  <div class="card-container">
    <ng-container *ngIf="products$ | async as products">
      <div *ngFor="let product of products">
        <!-- <mat-card class="card card-list">
          <mat-card-header>
            <mat-card-subtitle>{{ product.category }}</mat-card-subtitle>
            <mat-card-title>{{ product.title }}</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="card card-body">
              <p>{{ product.description }}</p>
            </div>
            <p>{{ product.employee }}</p>
            <mat-divider></mat-divider>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button>Edit</button>
            <button mat-button color="error">Cancell</button>
          </mat-card-actions>
        </mat-card> -->
        <mat-accordion>
          <mat-expansion-panel class="list">
            <mat-expansion-panel-header
              (click)="onCurrentProductSelected(product)"
            >
              <div class="list-header">
                <div class="category-container">
                  {{ product.category }}
                </div>
                <div>
                  {{ product.title }}
                  {{ product.description }}
                </div>
              </div>
            </mat-expansion-panel-header>
            <div class="list-actions">
              <button
                mat-stroked-button
                color="warn"
                (click)="deleteProduct(product.id)"
              >
                Delete
              </button>
            </div>
          </mat-expansion-panel>
        </mat-accordion>
      </div>
    </ng-container>
  </div>
  <div class="spinner-container" *ngIf="areProductLoading$ | async">
    <mat-progress-spinner
      [color]="'secundary'"
      [mode]="'indeterminate'"
      [diameter]="30"
    >
    </mat-progress-spinner>
  </div>
</div>

<app-new-product *ngIf="isProductFormVisible$ | async"> </app-new-product>
